<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#fff">

    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/color.css">
    <link rel="stylesheet" href="css/logins.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>Forgot password</title>
</head>
<body data-theme="light">
    <div class="container">
        <div class="form-wrapper">
            <div class="logo">                
            </div>
            <div class="logo-text">
                NEXUS
            </div>
            <div class="form-container">
                <form action="" method="post" id="form">
                    <div class="inpbx">
                        <label for="username">
                            <img src="images/user-icon.png">
                        </label>
                        <input type="text" name="username" id="username" placeholder="Username or email" maxlength="50">
                    </div>
                    <div id="msg">
                    </div>
                    <button type="submit" style="margin-top: 20px;">Next</button>
                </form>
            </div>
        </div>
        <footer class="ls-footer">
            &copy; 2020 - Mayank Singh
            <ul class="links">
                <li>
                    <a href="">Privacy</a> 
                </li>
                <li>
                    <a href="">APIs</a>
                </li>
                <li>
                    <a href="">Faqs</a>
                </li>
            </ul>
        </footer>
    </div>
</body>
<script src="js/main.js"></script>

<script>

    const loginForm = document.getElementById("form");
    loginForm.addEventListener("submit", (e) => {

        e.preventDefault();   

        let msg = ``;     


        if (msg == ""){
            console.log("proceeding");

            let xhr = new XMLHttpRequest();
            xhr.open('POST', '/login.php', true);

            xhr.onprogress = () => {

            }

            xhr.onload = () => {
                if (this.status === 200){
                    console.log(this.Response);
                    if (this.Response === 1){
                        msg = `<span color="green">An email has been sent to you with password
                        reset instructions. Please check that mail to reset your password.</span>`;
                    } else {
                        if (this.Response === -1){
                            msg = `<span color="red">User not found</span>`;
                        }
                    }
                    messageField.innerHTML = msg;
                }
            }

            let params = `{
                username: ${username}
            }`;

            xhr.send(params);
        }

    });


</script>
</html>